<Project>
  <PropertyGroup>
    <ClrHeapAllocationAnalyzerConfigurationVersion>1.0.0</ClrHeapAllocationAnalyzerConfigurationVersion>
    <ClrHeapAllocationAnalyzerConfigurationOutputPath>$(MSBuildProjectDirectory)</ClrHeapAllocationAnalyzerConfigurationOutputPath>
    <ClrHeapAllocationAnalyzerConfigurationBinary>$(NuGetPackageRoot)clrheapallocationanalyzer.configuration/$(ClrHeapAllocationAnalyzerConfigurationVersion)/bin/ClrHeapAllocationAnalyzer.Configuration.exe</ClrHeapAllocationAnalyzerConfigurationBinary>
  </PropertyGroup>
  <Target Name="GenerateAnalyzerConfiguration" BeforeTargets="CoreCompile" Condition="'$(IsRunningClrHeapAllocationAnalyzerConfiguration)' == ''" Inputs="@(Compile)" Outputs="$(ClrHeapAllocationAnalyzerConfigurationOutputPath)/whitelist.txt">
    <Exec Command="$(ClrHeapAllocationAnalyzerConfigurationBinary) $(ClrHeapAllocationAnalyzerConfigurationOutputPath)" />
  </Target>
</Project>